<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>You Found Me! üíñ</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* General Body Styling */
        body {
            margin: 0;
            overflow: hidden; /* Hide scrollbars for floating hearts */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f0e6f6; /* Light lavender background */
            font-family: 'Inter', sans-serif;
            color: #5d3f6a; /* Darker lavender for text */
            position: relative;
            padding: 20px;
            box-sizing: border-box;
        }

        /* Game Container */
        .game-container {
            background-color: #ffffff; /* White background for the game area */
            borde-radius: 25px; /* Soft rounded corners */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); /* Soft shadow */
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 10; /* Ensure it's above floating hearts */
            max-width: 90vw; /* Responsive width */
            margin-bottom: 20px; /* Space for footer */
        }6

        /* Canvas Styling */
        canvas {
            border: 5px solid #d3a8e0; /* Medium lavender border */
            border-radius: 15px; /* Rounded canvas corners */
            background-color: #fdfcfc; /* Off-white path color */
            display: block; /* Remove extra space below canvas */
            touch-action: none; /* Prevent default touch actions like scrolling */
            max-width: 100%; /* Ensure canvas fits in container */
            height: auto; /* Maintain aspect ratio */
        }

        /* Mobile Controls Styling */
        .controls {
            display: grid;
            grid-template-areas:
                ". up ."
                "left . right"
                ". down .";
            gap: 15px; /* Space between buttons */
            margin-top: 20px;
            width: 250px; /* Fixed width for controls */
            max-width: 80vw; /* Ensure it doesn't overflow on small screens */
        }

        .control-button {
            background-color: #ffb3ba; /* Light pink button */
            color: white;
            border: none;
            border-radius: 15px; /* Rounded button corners */
            padding: 15px 20px;
            font-size: 1.5em;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s ease, transform 0.2s ease;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .control-button:hover {
            background-color: #ff9aa2; /* Slightly darker pink on hover */
            transform: translateY(-2px); /* Slight lift effect */
        }

        .control-button:active {
            transform: translateY(0); /* Press effect */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Grid areas for control buttons */
        .control-button.up { grid-area: up; }
        .control-button.left { grid-area: left; }
        .control-button.right { grid-area: right; }
        .control-button.down { grid-area: down; }

        /* Goal Message Styling */
        .goal-message {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.95); /* Semi-transparent white overlay */
            border-radius: 25px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 1.8em;
            font-weight: bold;
            color: #5d3f6a;
            opacity: 0; /* Initially hidden */
            pointer-events: none; /* Allow clicks through when hidden */
            transition: opacity 0.5s ease;
            padding: 20px;
            box-sizing: border-box;
        }

        .goal-message.show {
            opacity: 1; /* Show when game ends */
            pointer-events: auto; /* Enable clicks when visible */
        }

        .goal-message img {
            width: 150px;
            height: 150px;
            border-radius: 50%; /* Circular image */
            margin-bottom: 20px;
            border: 5px solid #d3a8e0;
            object-fit: cover; /* Ensure image covers the area */
        }

        /* Footer Message */
        .footer-message {
            margin-top: 20px;
            font-size: 1.1em;
            color: #8b6e9a; /* Softer color for footer */
            text-align: center;
            font-weight: bold;
        }

        /* Floating Hearts Animation */
        .heart {
            position: absolute;
            background-color: #ffb3ba; /* Light pink heart */
            animation: floatHeart 10s infinite ease-in-out;
            opacity: 0; /* Start hidden */
            pointer-events: none; /* Do not interfere with clicks */
            font-size: 2em; /* Emoji size */
            z-index: 1;
        }

        @keyframes floatHeart {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0;
            }
            20% {
                opacity: 1;
            }
            80% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .game-container {
                padding: 15px;
            }
            canvas {
                border-width: 3px;
                border-radius: 10px;
            }
            .controls {
                gap: 10px;
                width: 200px;
            }
            .control-button {
                padding: 10px 15px;
                font-size: 1.2em;
                border-radius: 10px;
            }
            .goal-message {
                font-size: 1.5em;
            }
            .goal-message img {
                width: 100px;
                height: 100px;
                margin-bottom: 15px;
            }
            .footer-message {
                font-size: 0.9em;
            }
        }

        @media (max-width: 480px) {
            .game-container {
                padding: 10px;
            }
            canvas {
                border-width: 2px;
                border-radius: 8px;
            }
            .controls {
                gap: 8px;
                width: 180px;
            }
            .control-button {
                padding: 8px 10px;
                font-size: 1em;
                border-radius: 8px;
            }
            .goal-message {
                font-size: 1.2em;
            }
            .goal-message img {
                width: 80px;
                height: 80px;
                margin-bottom: 10px;
            }
            .footer-message {
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <canvas id="mazeCanvas"></canvas>

        <div class="controls">
            <button class="control-button up" data-direction="up">‚¨ÜÔ∏è</button>
            <button class="control-button left" data-direction="left">‚¨ÖÔ∏è</button>
            <button class="control-button right" data-direction="right">‚û°Ô∏è</button>
            <button class="control-button down" data-direction="down">‚¨áÔ∏è</button>
        </div>

        <div class="goal-message" id="goalMessage">
            <img src="haruaa.jpg" alt="Your Photo">
            <p>You found me! I've been waiting for you here ü•π</p>
        </div>
    </div>

    <div class="footer-message">
        This game is only for my favorite person üíó
    </div>

    <audio id="backgroundMusic" loop>
        <!-- Replace with your romantic/lofi music URL -->
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <script>
        const canvas = document.getElementById('mazeCanvas');
        const ctx = canvas.getContext('2d');
        const goalMessage = document.getElementById('goalMessage');
        const controlButtons = document.querySelectorAll('.control-button');
        const backgroundMusic = document.getElementById('backgroundMusic');

        // Maze parameters
        const gridSize = 21; // NxN grid for the heart maze
        let cellSize; // Will be calculated dynamically
        const wallColor = '#d3a8e0'; // Medium lavender for walls
        const pathColor = '#fdfcfc'; // Off-white for path
        const playerColor = 'üíå'; // Player emoji
        const goalColor = '#a2e8c2'; // Mint green for goal

        // Player position
        let playerX = 1; // Starting X coordinate (column)
        let playerY = 1; // Starting Y coordinate (row)

        // Goal position
        const goalX = 19; // Goal X coordinate
        const goalY = 10; // Goal Y coordinate

        let gameEnded = false;
        let musicStarted = false;

        // Maze layout (1 = wall, 0 = path)
        // Designed to form a heart shape with a path
        const maze = [
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,0,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1],
            [1,0,1,1,0,1,1,0,1,0,1,1,0,1,0,1,1,0,1,0,1],
            [1,0,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,1],
            [1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1], // Goal is at (19, 10)
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
        ];


        // Function to draw the maze
        function drawMaze() {
            ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear canvas

            for (let row = 0; row < gridSize; row++) {
                for (let col = 0; col < gridSize; col++) {
                    const x = col * cellSize;
                    const y = row * cellSize;

                    if (maze[row][col] === 1) {
                        ctx.fillStyle = wallColor; // Wall
                    } else {
                        ctx.fillStyle = pathColor; // Path
                    }
                    ctx.fillRect(x, y, cellSize, cellSize);

                    // Draw goal
                    if (col === goalX && row === goalY) {
                        ctx.fillStyle = goalColor;
                        ctx.fillRect(x, y, cellSize, cellSize);
                        ctx.font = `${cellSize * 0.7}px Arial`;
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';
                        ctx.fillText('üíñ', x + cellSize / 2, y + cellSize / 2); // Goal emoji
                    }
                }
            }
        }

        // Function to draw the player
        function drawPlayer() {
            ctx.font = `${cellSize * 0.8}px Arial`; // Make emoji larger relative to cell
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(playerColor, playerX * cellSize + cellSize / 2, playerY * cellSize + cellSize / 2);
        }

        // Function to update canvas size and redraw everything
        function resizeCanvas() {
            // Set canvas width based on the smaller of window width or height, with a max limit
            const size = Math.min(window.innerWidth * 0.8, window.innerHeight * 0.6, 500);
            canvas.width = size;
            canvas.height = size;
            cellSize = canvas.width / gridSize;
            drawGame();
        }

        // Main draw function
        function drawGame() {
            drawMaze();
            drawPlayer();
        }

        // Function to handle player movement
        function movePlayer(dx, dy) {
            if (gameEnded) return;

            const newPlayerX = playerX + dx;
            const newPlayerY = playerY + dy;

            // Check boundaries
            if (newPlayerX >= 0 && newPlayerX < gridSize &&
                newPlayerY >= 0 && newPlayerY < gridSize) {

                // Check for collision with walls
                if (maze[newPlayerY][newPlayerX] === 0) {
                    playerX = newPlayerX;
                    playerY = newPlayerY;
                    drawGame(); // Redraw game after movement

                    // Check if player reached the goal
                    if (playerX === goalX && playerY === goalY) {
                        endGame();
                    }
                }
            }
        }

        // Function to end the game
        function endGame() {
            gameEnded = true;
            goalMessage.classList.add('show'); // Show the goal message
            if (backgroundMusic) {
                backgroundMusic.pause();
            }
            // Stop keyboard listener
            document.removeEventListener('keydown', handleKeyDown);
            // Stop button listeners
            controlButtons.forEach(button => {
                button.removeEventListener('click', handleButtonClick);
            });
        }

        // Keyboard input handler
        function handleKeyDown(event) {
            if (!musicStarted) {
                if (backgroundMusic) {
                    backgroundMusic.play().catch(e => console.log("Music autoplay blocked:", e));
                }
                musicStarted = true;
            }

            switch (event.key) {
                case 'ArrowUp':
                case 'w':
                case 'W':
                    movePlayer(0, -1);
                    break;
                case 'ArrowDown':
                case 's':
                case 'S':
                    movePlayer(0, 1);
                    break;
                case 'ArrowLeft':
                case 'a':
                case 'A':
                    movePlayer(-1, 0);
                    break;
                case 'ArrowRight':
                case 'd':
                case 'D':
                    movePlayer(1, 0);
                    break;
            }
        }

        // Mobile button click handler
        function handleButtonClick(event) {
            if (!musicStarted) {
                if (backgroundMusic) {
                    backgroundMusic.play().catch(e => console.log("Music autoplay blocked:", e));
                }
                musicStarted = true;
            }

            const direction = event.currentTarget.dataset.direction;
            switch (direction) {
                case 'up':
                    movePlayer(0, -1);
                    break;
                case 'down':
                    movePlayer(0, 1);
                    break;
                case 'left':
                    movePlayer(-1, 0);
                    break;
                case 'right':
                    movePlayer(1, 0);
                    break;
            }
        }

        // Event listeners
        document.addEventListener('keydown', handleKeyDown);
        controlButtons.forEach(button => {
            button.addEventListener('click', handleButtonClick);
        });

        // Initialize game on window load
        window.onload = function() {
            resizeCanvas(); // Set initial canvas size and draw
            window.addEventListener('resize', resizeCanvas); // Resize canvas on window resize
        };

        // Initialize floating hearts
        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.innerHTML = 'üíñ'; // Heart emoji
            document.body.appendChild(heart);

            const size = Math.random() * 20 + 10; // 10px to 30px
            heart.style.width = `${size}px`;
            heart.style.height = `${size}px`;
            heart.style.left = `${Math.random() * 100}vw`; // Random horizontal position
            heart.style.animationDuration = `${Math.random() * 5 + 5}s`; // 5s to 10s duration
            heart.style.animationDelay = `${Math.random() * 5}s`; // Random delay

            // Remove heart after animation finishes
            heart.addEventListener('animationend', () => {
                heart.remove();
            });
        }

        // Generate hearts periodically
        setInterval(createHeart, 800); // Create a new heart every 800ms
    </script>
</body>
</html>
